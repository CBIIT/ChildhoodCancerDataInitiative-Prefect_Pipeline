# Welcome to your prefect.yaml file! You can use this file for storing and managing
# configuration for deploying your flows. We recommend committing this file to source
# control along with your flow code.

# Generic metadata about this project
name: s3-Prefect-Workflow
prefect-version: 2.14.19

# build section allows you to manage and build docker images
build: null

# push section allows you to manage if and how this project is uploaded to remote locations
push: null

# pull section allows you to provide instructions for cloning this project in remote locations

pull:
  - prefect.projects.steps.git_clone_project:
      id: clone-step
      repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
      branch: main
  - prefect.projects.steps.pip_install_requirements:
      requirements_file: requirements.txt
      directory: "{{ clone-step.directory }}"
      stream_output: False

# the deployments section allows you to provide configuration for deploying flows
deployments:
  # base metadata
  - name: ccdi-data-curation-2gb
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/s3-Prefect-Pipeline.py:runner
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      file_path: "inputs/CCDI_Submission_Template_v1.9.1_20Exampler.xlsx"
      #runner: "your_uniq_id"
      #optional parmaeters below, uncomment if needed
      #output_folder: "output_folder_name"
      #template_path: "inputs/CCDI_Submission_Template_v1.7.1.xlsx"
      #sra_template_path: "inputs/phsXXXXXX.xlsx"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.3.4
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-2gb
      work_queue_name: null
      job_variables: {}

  - name: ccdi-data-curation-8gb
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/s3-Prefect-Pipeline.py:runner
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      file_path: "inputs/CCDI_Submission_Template_v1.9.1_20Exampler.xlsx"
      #runner: "your_uniq_id"
      #optional parmaeters below, uncomment if needed
      #output_folder: "output_folder_name"
      #template_path: "inputs/CCDI_Submission_Template_v1.7.1.xlsx"
      #sra_template_path: "inputs/phsXXXXXX.xlsx"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.3.4
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-8gb
      work_queue_name: null
      job_variables: {}
  
  - name: ccdi-data-curation-16gb
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/s3-Prefect-Pipeline.py:runner
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      file_path: "inputs/CCDI_Submission_Template_v1.9.1_20Exampler.xlsx"
      #runner: "your_uniq_id"
      #optional parmaeters below, uncomment if needed
      #output_folder: "output_folder_name"
      #template_path: "inputs/CCDI_Submission_Template_v1.7.1.xlsx"
      #sra_template_path: "inputs/phsXXXXXX.xlsx"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.3.4
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-16gb
      work_queue_name: null
      job_variables: {}
  
  - name: ccdi-data-curation-32gb
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/s3-Prefect-Pipeline.py:runner
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      file_path: "inputs/CCDI_Submission_Template_v1.9.1_20Exampler.xlsx"
      #runner: "your_uniq_id"
      #optional parmaeters below, uncomment if needed
      #output_folder: "output_folder_name"
      #template_path: "inputs/CCDI_Submission_Template_v1.7.1.xlsx"
      #sra_template_path: "inputs/phsXXXXXX.xlsx"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.3.4
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-32gb
      work_queue_name: null
      job_variables: {}

  - name: ccdi-data-curation-60gb
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/s3-Prefect-Pipeline.py:runner
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      file_path: "inputs/CCDI_Submission_Template_v1.9.1_20Exampler.xlsx"
      #runner: "your_uniq_id"
      #optional parmaeters below, uncomment if needed
      #output_folder: "output_folder_name"
      #template_path: "inputs/CCDI_Submission_Template_v1.7.1.xlsx"
      #sra_template_path: "inputs/phsXXXXXX.xlsx"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.3.4
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-60gb
      work_queue_name: null
      job_variables: {}

  - name: bucket-reader-2gb
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/bucket_reader.py:reader
    schedule: null

    # flow-specific parameters
    parameters:

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-2gb
      work_queue_name: null
      job_variables: {}

  - name: template-exampler
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/Template_Exampler.py:run_template_exampler
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      number_of_entries: 20

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-2gb
      work_queue_name: null
      job_variables: {}

  - name: ccdi-file-copier
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/File_Mover.py:file_mover
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.1.4
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-60gb
      work_queue_name: null
      job_variables: {}

  - name: get-parameter-2gb
    version: null
    tags: ["Test"]
    description: null
    entrypoint: workflows/get_aws_parameter.py:get_aws_parameter
    schedule: null

    # flow-specific parameters
    parameters:
      parameter_name: "prefect-test"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: main
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-2gb
      work_queue_name: null
      job_variables: {}

  - name: pull-neo4j-data-8gb-ccdi
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/pull_neo4j_data.py:pull_neo4j_data
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      uri_parameter: "uri"
      username_parameter: "username"
      password_parameter: "password"
    

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: main
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-8gb
      work_queue_name: null
      job_variables: {}

  - name: pull-neo4j-data-16gb-c3dc
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/pull_neo4j_data.py:pull_neo4j_data
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "c3dc-curation"
      uri_parameter: "uri"
      username_parameter: "username"
      password_parameter: "password"
    

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: main
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-c3dc-16gb
      work_queue_name: null
      job_variables: {}

  - name: validate-neo4j-data-32gb
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/validate_neo4j_data.py:validate_neo4j_data
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-32gb
      work_queue_name: null
      job_variables: {}

  - name: ccdi-guid-checker-32gb
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/guid_checker.py:guid_checker_runner
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      file_path: "inputs/CCDI_Submission_Template_v1.7.2_10ExampleR20231228.xlsx"
      runner: "your_uniq_id"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: main
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-32gb
      work_queue_name: null
      job_variables: {}

  # base metadata
  - name: model-mapping-maker-8gb
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/model_mapping_maker.py:runner
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      runner: "your_uniq_id"
      old_model_repository: "ccdi-model"
      new_model_repository: "ccdi-model"
      old_model_file_location: "model-desc/ccdi-model.yml"
      new_model_file_location: "model-desc/ccdi-model.yml"
      old_model_version: ""
      new_model_version: ""
      base_mode:  False 
      nodes_mapping_file: "path_to/nodes_file/in/s3_bucket"
      relationship_mapping_file: "path_to/nodes_file/in/s3_bucket"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-8gb
      work_queue_name: null
      job_variables: {} 

  - name: ccdi-template-liftover
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/ccdi_manifest_liftover.py:manifest_liftover
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      lift_to_tag: "1.9.1"
      liftover_mapping_filepath: "Model_Mapping_Maker/1.7.2-1.9.1/model_mapping_maker_20240718_T133843/1.7.2_1.9.1_MAPPING_20240718.tsv"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-32gb
      work_queue_name: null
      job_variables: {}

  - name: dcf-index
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/dcf_indexing.py:dcf_index_manifest
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-8gb
      work_queue_name: null
      job_variables: {}

  - name: fetch-size-md5sum
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/fetch_size_md5sum.py:get_size_md5sum
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-8gb
      work_queue_name: null
      job_variables: {}

  - name: file-remover
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/File_Remover.py:run_file_remover
    schedule: null

    # flow-specific parameters
    parameters:

    # pull action to overwrite from file pull action
    pull:
      - prefect.deployments.steps.git_clone:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.1.1
      - prefect.deployments.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False
      

    # infra-specific fields
    work_pool:
      name: ccdi-curation-32gb
      work_queue_name: null
      job_variables: {}

  - name: get-parameter
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/get_aws_parameter.py:get_aws_parameter
    schedule: null

    # flow-specific parameters
    parameters:
      parameter_name: "prefect-test"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-2gb
      work_queue_name: null
      job_variables: {}

  - name: join-tsv-to-manifest
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/db_tsv_to_manifest.py:join_tsv_to_manifest
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.16
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-16gb
      work_queue_name: null
      job_variables: {}

  - name: mci-release-manifest
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/mci_release_run.py:mci_release_manifest
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      template_tag: "2.1.0"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.3.3
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-8gb
      work_queue_name: null
      job_variables: {}

  - name: model-to-submission
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/model_to_submission.py:create_submission_manifest
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-2gb
      work_queue_name: null
      job_variables: {}

  - name: new-model-validation
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/new_model_validation.py:validate_new_model
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-2gb
      work_queue_name: null
      job_variables: {}

  - name: submission-cruncher
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/Submission_Cruncher.py:submission_cruncher
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-8gb
      work_queue_name: null
      job_variables: {}


  - name: file-mover
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/file_mover_delete.py:file_mover_delete
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.3
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-32gb
      work_queue_name: null
      job_variables: {}


  - name: ccdi-to-sra
    version: null
    tags: ["TEST"]
    description: null
    entrypoint: workflows/ccdi_to_sra.py:run_ccdi_to_sra
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: CCDIDC-1334_sra_library_id
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-60gb
      work_queue_name: null
      job_variables: {}
      
  - name: neo4j-stats
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/neo4j_stats.py:pull_neo4j_stats
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: main
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-32gb
      work_queue_name: null
      job_variables: {}  

  - name: join-tsv-to-manifest_OLD
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/db_tsv_to_manifest.py:join_tsv_to_manifest
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.0.1
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

  - name: guid-meta-check
    version: null
    tags: ["Production"]
    description: null
    entrypoint: src/sandbox_indexd_guid_validation.py:guid_validation_between_sandbox_indexd
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.1.7
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

  - name: DB-props-uniq-report
    version: null
    tags: ["Production"]
    description: null
    entrypoint: src/neo4j_data_tools.py:report_unique_values_properties
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.2.0
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-8gb
      work_queue_name: null
      job_variables: {}  

  - name: bucket-content-search
    version: null
    tags: ["Production"]
    description: null
    entrypoint: src/search_bucket_content.py:search_buckets_content
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: 1.2.2
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-8gb
      work_queue_name: null
      job_variables: {}

  - name: ccdi-gdc-transformation-16gb
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/ccdi_to_gdc.py:ccdi_to_gdc_run
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      runner: "runner_id"
      file_path: "inputs/CCDI_Submission_Template_v1.9.1_20Exampler.xlsx"
      ccdi_gdc_translation_file: ""
      platform_preservation_file: ""

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: main
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-16gb
      work_queue_name: null
      job_variables: {}

  # base metadata
  - name: ccdi-gdc-import
    version: null
    tags: ["Production"] 
    description: null
    entrypoint: workflows/gdc_import.py:runner
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      file_path: ""
      runner: ""
      node_type: "case"
      secret_name_path: "ccdi/nonprod/inventory/gdc-token"
      secret_key_name: "gdc-token"
      project_id: "CCDI-MCI"
      sstr: "phs002790.v7"
      check_for_updates: "yes"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: main
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-16gb
      work_queue_name: null
      job_variables: {}

  # base metadata
  - name: ccdi-gdc-file-upload
    version: null
    tags: [ "Production" ]
    description: null
    entrypoint: workflows/gdc_file_upload.py:runner
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      project_id: "CCDI-MCI"
      manifest_path: ""
      gdc_client_path: "bullenca/file_upload_test/gdc-client"
      runner: ""
      secret_name_path: "ccdi/nonprod/inventory/gdc-token"
      secret_key_name: "gdc-token"
      upload_part_size_mb: 6
      n_processes: 40
      process_type: "upload_files"


    # pull action to overwrite from file pull action
    pull:
    - prefect.projects.steps.git_clone_project:
        id: clone-step
        repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
        branch: main
    - prefect.projects.steps.pip_install_requirements:
        requirements_file: requirements.txt
        directory: "{{ clone-step.directory }}"
        stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-32gb
      work_queue_name: null
      job_variables: {}

  - name: ccdi-neo4j-db_diff
    version: null
    tags: ["Production"]
    description: null
    entrypoint: workflows/neo4j_db_diff.py:diff_sandbox_dev_neo4j
    schedule: null

    # flow-specific parameters
    parameters:
      bucket: "ccdi-validation"
      runner: "your_uniq_id"
      database_1: "Curation"
      database_2: "Dev"

    # pull action to overwrite from file pull action
    pull:
      - prefect.projects.steps.git_clone_project:
          id: clone-step
          repository: https://github.com/CBIIT/ChildhoodCancerDataInitiative-Prefect_Pipeline.git
          branch: main
      - prefect.projects.steps.pip_install_requirements:
          requirements_file: requirements.txt
          directory: "{{ clone-step.directory }}"
          stream_output: False

    # infra-specific fields
    work_pool:
      name: ccdi-curation-8gb
      work_queue_name: null
      job_variables: {}
